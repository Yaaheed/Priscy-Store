<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Dashboard - Priscy Store</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="manifest" href="../manifest.json">
</head>
<body>
    <div class="dashboard">
        <header>
            <h1>Staff Dashboard</h1>
            <button id="logoutBtn">Logout</button>
        </header>
        <nav>
            <button class="tab-btn active" data-tab="recordSale">Record Sale</button>
            <button class="tab-btn" data-tab="viewProducts">View Products</button>
            <button class="tab-btn" data-tab="salesHistory">Sales History</button>
            <button class="tab-btn" data-tab="notifications">Notifications</button>
        </nav>
        <main>
            <div id="recordSale" class="tab-content active">
                <h2>Record New Sale</h2>
                <form id="saleForm">
                    <div class="form-group">
                        <label for="saleProduct">Product:</label>
                        <select id="saleProduct" name="ProductID" required></select>
                    </div>
                    <div class="form-group">
                        <label for="saleQuantity">Quantity:</label>
                        <input type="number" id="saleQuantity" name="QuantitySold" required>
                    </div>
                    <div class="form-group">
                        <label for="salePrice">Price:</label>
                        <input type="number" step="0.01" id="salePrice" name="SalePrice" required>
                    </div>
                    <button type="submit">Record Sale</button>
                </form>
            </div>
            <div id="viewProducts" class="tab-content">
                <h2>Available Products</h2>
                <table id="productsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Stock</th>
                            <th>Price</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div id="salesHistory" class="tab-content">
                <h2>Recent Sales</h2>
                <table id="salesTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Product</th>
                            <th>Quantity</th>
                            <th>Price</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div id="notifications" class="tab-content">
                <h2>Notifications</h2>
                <div id="notificationList"></div>
            </div>
        </main>
    </div>
    <!-- Appwrite SDK for Realtime -->
    <script src="https://cdn.jsdelivr.net/npm/appwrite@11.0.0"></script>
    <script>
        // This information is not sensitive as it's for client-side access.
        // In a production app, you'd load these from a config endpoint.
        const appwriteClient = new Appwrite.Client().setEndpoint('https://cloud.appwrite.io/v1').setProject('655e6c32a3da253053a4');
    </script>
    <script src="../assets/js/api.js"></script>
    <script src="../assets/js/staff.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/assets/js/sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
